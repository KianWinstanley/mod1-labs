<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasks</title>
    <style>
        body {
            font-family: sans-serif;
        }

        label, input, button {
            margin: 5px, 0;
        }

        .priority-1 {
            color: red;
            font-weight: bold;
        }

        .priority-2 {
            color: green;
        }

        .priority-3 {
            color: blue;
        }

        .priority-4 {
            color: brown;
        }

        .priority-5 {
            color: black;
        }
    </style>
</head>
<body onload="loadItems()">
    <h2>Task Manager</h2>

    <label for="taskInput">New Task:</label>
    <input type="text" id="taskInput" placeholder="Enter a task"><br>

    <label for="priorityInput">Priority (1 = highest, 5 = lowest):</label>
    <input type="number" id="priorityInput" min="1" max="5" value="3">

    <button onclick="addTask()">Add Task</button><br><br>

    <label for="taskToDelete">Delete Task:</label>
    <input type="text" id="taskToDelete" placeholder="Enter a task"><br>
    <button onclick="deleteTask()">Delete Task</button><br><br>

    <button onclick="saveItems()">Save Tasks</button>

    <h3>Task List</h3>
    <ul id="taskList"></ul>

    <script>
        var tasks = [];
        class Task {
            constructor(text, priority) {
                this.text = text;
                this.priority = priority;
            }
        }

        function addTask() {
            var task = document.getElementById("taskInput").value;
            var taskList = document.getElementById("taskList");
            var priority = document.getElementById("priorityInput").value;

            var li = document.createElement("li");
            if (priority == 1) {
                li.innerText = "Priority 1: ";
                li.classList.add("priority-1");
            }
            else if (priority == 2) {
                li.innerText = "Priority 2: ";
                li.classList.add("priority-2");
            }
            else if (priority == 3) {
                li.innerText = "Priority 3: ";
                li.classList.add("priority-3");
            }
            else if (priority == 4) {
                li.innerText = "Priority 4: ";
                li.classList.add("priority-4");
            }
            else {
                li.innerText = "Priority 5: ";
                li.classList.add("priority-5");
            }

            const removeBtn = document.createElement("button");
            removeBtn.innerText = "Completed - Remove from List";
            removeBtn.onclick = () => {
                taskList.removeChild(li);
                tasks = tasks.filter(t => t.text !== task);
            };

            li.innerText += task;
            li.appendChild(removeBtn);
            taskList.appendChild(li);
            var newItem = new Task(task, priority);
            tasks.push(newItem);
        }

        function deleteTask() {
            var task = document.getElementById("taskToDelete").value;
            var taskList = document.getElementById("taskList");
            var items = taskList.getElementsByTagName("li");

            for (var i = 0; i < items.length; i++) {
                if (items[i].innerText.includes(task)) {
                    taskList.removeChild(items[i]);
                    break;
                }
            }

            tasks = tasks.filter(t => t.text !== task);
        }

        function saveItems() {
            console.log(localStorage.setItem("taskItems", JSON.stringify(tasks)));
            alert("Tasks saved!");
        }

        function loadItems() {
            let items = localStorage.getItem("taskItems");
            
            if (!items) {
                tasks = [];
                return;
            }

            var parsed = JSON.parse(items);
            tasks = parsed.map(t => new Task(t.text, t.priority));
            
            var taskList = document.getElementById("taskList");
            taskList.innerHTML = "";

            for (let task of tasks) {
                var li = document.createElement("li");
                li.classList.add(`priority-${task.priority}`);
                li.innerText = `Priority ${task.priority}: ${task.text}`;

                const removeBtn = document.createElement("button");
                removeBtn.innerText = "Completed - Remove from List";
                removeBtn.onclick = () => {
                    taskList.removeChild(li);
                    tasks = tasks.filter(t => t.text !== task.text);
                };
                li.appendChild(removeBtn);
                taskList.appendChild(li);
            }
        }

    </script>
</body>
</html>